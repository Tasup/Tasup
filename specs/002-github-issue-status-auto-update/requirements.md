# 要件定義書

## はじめに

Claude Codeのslash commandまたはskillsを使用して、GitHubのissueステータスを自動的に更新する機能を提供します。開発者がissueに関連する作業を開始したタイミング（ブランチ作成やコミット作成時）で、GitHubのissue URLを指定することで、issueのステータスを「TODO」から「IN_PROGRESS」に自動的に変更します。これにより、プロジェクト管理の手間を削減し、issueの現在の状態を正確に反映できます。

## 要件

### 要件 1: GitHubのURL指定によるissueステータス更新

**ユーザーストーリー:** 開発者として、Claude CodeのコマンドでGitHubのissue URLを指定してステータスを「IN_PROGRESS」に更新したい。なぜなら、issue番号だけでなくリポジトリ情報も明確に指定できるため。

#### 受け入れ基準

1. ユーザーがslash commandまたはskillsでGitHubのissue URL（例: `https://github.com/owner/repo/issues/123`）を指定した場合、システムは対象のissueのステータスを「TODO」から「IN_PROGRESS」に更新しなければならない
2. 指定されたURLが有効なGitHub issue URLでない場合、システムはエラーメッセージを表示しなければならない
3. 対象のissueが存在しない場合、システムはエラーメッセージを表示しなければならない
4. GitHubのAPI認証に失敗した場合、システムは適切なエラーメッセージを表示しなければならない
5. ステータス更新が成功した場合、システムは確認メッセージを表示しなければならない

### 要件 2: ブランチ作成と同時のステータス更新

**ユーザーストーリー:** 開発者として、新しいブランチを作成する際にissue URLを指定してステータスを自動的に更新したい。なぜなら、作業開始のタイミングでブランチ作成とステータス更新を同時に行いたいため。

#### 受け入れ基準

1. ユーザーがブランチ作成コマンドとともにissue URLを指定した場合、システムはブランチ作成後に対象のissueのステータスを「IN_PROGRESS」に更新しなければならない
2. ブランチ作成に失敗した場合、システムはissueステータスを更新せず、エラーメッセージを表示しなければならない
3. 対象のissueが既に「IN_PROGRESS」の場合、システムはステータスを変更せず、処理を正常終了しなければならない

### 要件 3: コミット作成と同時のステータス更新

**ユーザーストーリー:** 開発者として、コミット作成時にissue URLを指定してステータスを自動的に更新したい。なぜなら、最初のコミットを作成したタイミングで作業開始を明示したいため。

#### 受け入れ基準

1. ユーザーがコミット作成コマンドとともにissue URLを指定した場合、システムはコミット作成後に対象のissueのステータスを「IN_PROGRESS」に更新しなければならない
2. コミット作成に失敗した場合、システムはissueステータスを更新せず、エラーメッセージを表示しなければならない
3. 対象のissueが既に「IN_PROGRESS」の場合、システムはステータスを変更せず、処理を正常終了しなければならない

### 要件 4: GitHubプロジェクトのステータスフィールド対応

**ユーザーストーリー:** 開発者として、GitHub ProjectsのステータスフィールドやProject V2の項目が正しく更新されてほしい。なぜなら、issueのラベルではなくProjectsのステータス管理を使用しているため。

#### 受け入れ基準

1. 対象のissueがGitHub Projectsに関連付けられている場合、システムはプロジェクトのステータスフィールドを「TODO」から「IN_PROGRESS」に更新しなければならない
2. issueが複数のプロジェクトに関連付けられている場合、システムはすべてのプロジェクトのステータスを更新しなければならない
3. プロジェクトにステータスフィールドが存在しない場合、システムは警告メッセージを表示しなければならない
